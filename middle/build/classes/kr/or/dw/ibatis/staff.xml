<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="staff">
	
	<select id="staffLogin" parameterClass="String" resultClass="staffVO">
		SELECT *
		FROM staffs
		WHERE staff_id = #staff_id#
	</select>
	
	<select id="getStaffName" parameterClass="String" resultClass="String">
		SELECT staff_name FROM staffs WHERE staff_id = #staff_id#
	</select>
	
	<select id="idEmailCheck" parameterClass="staffVO" resultClass="int">
		SELECT count(*) FROM staffs WHERE staff_id = #staff_id# AND staff_email = #staff_email#
	</select>
	<select id="getAllProfessorList" resultClass="StaffVO">
		SELECT s.*, d.dept_name 
		  FROM staffs s, dept d 
		 WHERE auth_cd = 'P'
		   AND s.dept_code = d.dept_code
	</select>
	<select id="getDept" resultClass="StaffVO">
		SELECT dept_code, dept_name
		  FROM dept
	
	</select>
	<insert id="professorInsert" parameterClass="StaffVO">
		INSERT INTO staffs (
							   staff_id
							  ,staff_name
							  ,staff_gender
							  ,staff_resnum
							  ,staff_zipcode
							  ,staff_addr
							  ,staff_detailaddr
							  ,dept_code
							  ,staff_div
							  ,staff_tel
							  ,staff_email
							  ,staff_state
							  ,staff_hiredate
							  ,auth_cd
							  ,staff_pwd	
							  )
				VALUES (
							   #staff_id#
							  ,#staff_name#
							  ,#staff_gender#
							  ,#staff_resnum#
							  ,#staff_zipcode#
							  ,#staff_addr#
							  ,#staff_detailaddr#
							  ,#dept_code#
							  ,#staff_div#
							  ,#staff_tel#
							  ,#staff_email#
							  ,#staff_state#
							  ,SYSDATE
							  ,#auth_cd#
							  ,#staff_pwd#
							)
	</insert>
	
	<delete id="professorDelete" parameterClass="String">
		DELETE staffs WHERE staff_id = #staff_id#
	</delete>
	
	<select id="getstaffInfo" parameterClass="String" resultClass="StaffVO">
		SELECT s.*, d.dept_name
		  FROM staffs s, dept d
		 WHERE s.dept_code = d.dept_code
		   AND staff_id = #staff_id#
	</select>
	
	<update id="professorUpdate" parameterClass="StaffVO">
		UPDATE staffs SET staff_name = #staff_name#
						 ,staff_gender = #staff_gender#
						 ,staff_resnum = #staff_resnum#
						 ,staff_zipcode = #staff_zipcode#
						 ,staff_addr = #staff_addr#
						 ,staff_detailaddr = #staff_detailaddr#
						 ,dept_code = #dept_code#
						 ,staff_tel = #staff_tel#
						 ,staff_email = #staff_email#
						 ,staff_state = #staff_state#
			WHERE staff_id = #staff_id#
	</update>
	
	<select id="selectProfessorCount" resultClass="int" parameterClass="String">
		SELECT COUNT(*) cnt
		  FROM staffs
		 WHERE auth_cd = 'P'
	</select>
</sqlMap>