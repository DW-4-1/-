<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="student">
	
	<select id="studentLogin" parameterClass="String" resultClass="stuVO">
		SELECT *
		FROM students
		WHERE stu_id = #stu_id#
	</select>
	
	<select id="studentAllInfo" resultClass="stuVO">
		SELECT *
		  FROM students
	</select>
	
	<select id="studentInfo" parameterClass="String" resultClass="stuVO">
		SELECT s.*, d.dept_name
		  FROM students s, dept d 
		 WHERE s.stu_id = #stu_id#
		   AND s.dept_code = d.dept_code
	</select>
	
	<update id="stuInfoUpdate" parameterClass="stuVO">
		UPDATE students SET stu_addr = #stu_addr#
						   ,stu_zipcode = #stu_zipcode#
						   ,stu_tel = #stu_tel#
		 WHERE stu_id = #stu_id#
	</update>

	<update id="passwordUpdate" parameterClass="stuVO">
		UPDATE students SET stu_pwd = #stu_pwd#
	</update>
	
	<select id="idEmailCheck" parameterClass="stuVO" resultClass="int">
		SELECT count(*) FROM students WHERE stu_id = #stu_id# AND stu_email = #stu_email#
	</select>

	
</sqlMap>